!function(a){function b(a){Object.defineProperty(this,a,{enumerable:!0,get:function(){return this[o][a]}})}function c(a){if("undefined"!=typeof System&&System.isModule?System.isModule(a):"[object Module]"===Object.prototype.toString.call(a))return a;var b={default:a,__useDefault:a};if(a&&a.__esModule)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return new d(b)}function d(a){Object.defineProperty(this,o,{value:a}),Object.keys(a).forEach(b,this)}function e(a){return"@node/"===a.substr(0,6)?m(a,c(p(a.substr(6))),{}):n[a]}function f(a){var b=e(a);if(!b)throw new Error('Module "'+a+'" expected, but not contained in build.');if(b.module)return b.module;var c=b.linkRecord;return g(b,c),l(b,c,[]),b.module}function g(a,b){if(!b.depLoads){b.declare&&h(a,b),b.depLoads=[];for(var c=0;c<b.deps.length;c++){var d=e(b.deps[c]);b.depLoads.push(d),d.linkRecord&&g(d,d.linkRecord);var f=b.setters&&b.setters[c];f&&(f(d.module||d.linkRecord.moduleObj),d.importerSetters.push(f))}return a}}function h(b,c){var d=c.moduleObj,e=b.importerSetters,f=!1,g=c.declare.call(a,function(a,b){if(!f){if("object"==typeof a)for(var c in a)"__useDefault"!==c&&(d[c]=a[c]);else d[a]=b;f=!0;for(var g=0;g<e.length;g++)e[g](d);return f=!1,b}},{id:b.key});"function"!=typeof g?(c.setters=g.setters,c.execute=g.execute):(c.setters=[],c.execute=g)}function i(a,b,c){return n[a]={key:a,module:void 0,importerSetters:[],linkRecord:{deps:b,depLoads:void 0,declare:c,setters:void 0,execute:void 0,moduleObj:{}}}}function j(a,b,c,d){var e={};return n[a]={key:a,module:void 0,importerSetters:[],linkRecord:{deps:b,depLoads:void 0,declare:void 0,execute:d,executingRequire:c,moduleObj:{default:e,__useDefault:e},setters:void 0}}}function k(a,b,c){return function(d){for(var e=0;e<a.length;e++)if(a[e]===d){var f,g=b[e],h=g.linkRecord;return f=h?-1===c.indexOf(g)?l(g,h,c):h.moduleObj:g.module,"__useDefault"in f?f.__useDefault:f}}}function l(b,c,e){if(e.push(b),b.module)return b.module;if(c.setters){for(var f=0;f<c.deps.length;f++){var g=c.depLoads[f],h=g.linkRecord;h&&-1===e.indexOf(g)&&l(g,h,h.setters?e:[])}c.execute.call(q)}else{var i={id:b.key},j=c.moduleObj;Object.defineProperty(i,"exports",{configurable:!0,set:function(a){j.default=j.__useDefault=a},get:function(){return j.__useDefault}});var m=k(c.deps,c.depLoads,e);if(!c.executingRequire)for(var f=0;f<c.deps.length;f++)m(c.deps[f]);var n=c.execute.call(a,m,j.__useDefault,i);void 0!==n?j.default=j.__useDefault=n:i.exports!==j.__useDefault&&(j.default=j.__useDefault=i.exports);var o=j.__useDefault;if(o&&o.__esModule)for(var p in o)Object.hasOwnProperty.call(o,p)&&(j[p]=o[p])}var i=b.module=new d(c.moduleObj);if(!c.setters)for(var f=0;f<b.importerSetters.length;f++)b.importerSetters[f](i);return i}function m(a,b){return n[a]={key:a,module:b,importerSetters:[],linkRecord:void 0}}var n={},o="undefined"!=typeof Symbol?Symbol():"@@baseObject";d.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="Module");var p="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&void 0!==require.resolve&&"undefined"!=typeof process&&process.platform&&require,q={};return Object.freeze&&Object.freeze(q),function(a,b,e,g){return function(h){h(function(h){var k={_nodeRequire:p,register:i,registerDynamic:j,registry:{get:function(a){return n[a].module},set:m},newModule:function(a){return new d(a)}};m("@empty",new d({}));for(var l=0;l<b.length;l++)m(b[l],c(arguments[l],{}));g(k);var o=f(a[0]);if(a.length>1)for(var l=1;l<a.length;l++)f(a[l]);return e?o.__useDefault:(o instanceof d&&Object.defineProperty(o,"__esModule",{value:!0}),o)})}}}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this)(["a"],[],!1,function(a){this.require,this.exports,this.module;!function(b){function c(a,b){for(var c=a.split(".");c.length;)b=b[c.shift()];return b}function d(a){if("string"==typeof a)return c(a,b);if(!(a instanceof Array))throw new Error("Global exports must be a string or array.");for(var d={},e=0;e<a.length;e++)d[a[e].split(".").pop()]=c(a[e],b);return d}function e(a){if(-1===h.indexOf(a)){try{var c=b[a]}catch(b){h.push(a)}this(a,c)}}var f,g=a,h=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB","mozInnerScreenY","mozInnerScreenX"];g.registry.set("@@global-helpers",g.newModule({prepareGlobal:function(a,c,g){var h=b.define;b.define=void 0;var i;if(g){i={};for(var j in g)i[j]=b[j],b[j]=g[j]}return c||(f={},Object.keys(b).forEach(e,function(a,b){f[a]=b})),function(){var a,g=c?d(c):{},j=!!c;if(c||Object.keys(b).forEach(e,function(b,d){f[b]!==d&&void 0!==d&&(c||(g[b]=d,void 0!==a?j||a===d||(j=!0):a=d))}),g=j?g:a,i)for(var k in i)b[k]=i[k];return b.define=h,g}}}))}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this),a.registerDynamic("b",[],!1,function(b,c,d){var e=a.registry.get("@@global-helpers").prepareGlobal(d.id,null,null);return function(a){window.ESPA=window.ESPA||{},window.ESPA.route=function(){"use strict";function a(a){return a.split(/[\/?#]/)}function b(a,b){var c=b.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*"),d=new RegExp("^"+c+"$"),e=a.match(d);return e?e.slice(1):void 0}function c(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function d(a){m=c(j,1),B[v](x,m),B[v](y,m),C[v](G,k),a&&j(!0)}function e(){this.$=[],r(this),H.on("stop",this.s.bind(this)),H.on("emit",this.e.bind(this))}function f(a){return a.replace(/^\/|\/$/,"")}function g(a){return"string"==typeof a}function h(a){return(a||E.href).replace(s,"")}function i(a){return"#"===n[0]?(a||E.href||"").split(n)[1]||"":(E?h(a):a||"").replace(n,"")}function j(a){var b=0===L;if(!(L>=A)&&(L++,K.push(function(){var b=i();(a||b!==o)&&(H[z]("emit",b),o=b)}),b)){for(var c;c=K.shift();)c();L=0}}function k(a){if(!(1!==a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.defaultPrevented)){for(var b=a.target;b&&"A"!==b.nodeName;)b=b.parentNode;!b||"A"!==b.nodeName||b[w]("download")||!b[w]("href")||b.target&&"_self"!==b.target||-1===b.href.indexOf(E.href.match(s)[0])||(b.href===E.href||!(b.href.split("#")[0]===E.href.split("#")[0]||"#"!==n[0]&&0!==h(b.href).indexOf(n)||"#"===n[0]&&b.href.split(n)[0]!==E.href.split(n)[0])&&l(i(b.href),b.title||C.title))&&a.preventDefault()}}function l(a,b,c){return D?(a=n+f(a),b=b||C.title,c?D.replaceState(null,b,a):D.pushState(null,b,a),C.title=b,J=!1,j(),J):H[z]("emit",i(a))}var m,n,o,p,q,r=function(a){a=a||{};var b={},c=Array.prototype.slice;return Object.defineProperties(a,{on:{value:function(c,d){return"function"==typeof d&&(b[c]=b[c]||[]).push(d),a},enumerable:!1,writable:!1,configurable:!1},off:{value:function(c,d){if("*"!=c||d)if(d)for(var e,f=b[c],g=0;e=f&&f[g];++g)e==d&&f.splice(g--,1);else delete b[c];else b={};return a},enumerable:!1,writable:!1,configurable:!1},one:{value:function(b,c){function d(){a.off(b,d),c.apply(a,arguments)}return a.on(b,d)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(d){var e,f,g,h=arguments,i=arguments.length-1,j=new Array(i);for(g=0;i>g;g++)j[g]=h[g+1];for(e=c.call(b[d]||[],0),g=0;f=e[g];++g)f.apply(a,j);return b["*"]&&"*"!=d&&a.trigger.apply(a,["*",d].concat(j)),a},enumerable:!1,writable:!1,configurable:!1}}),a},s=/^.+?\/\/+[^\/]+/,t="EventListener",u="remove"+t,v="add"+t,w="hasAttribute",x="popstate",y="hashchange",z="trigger",A=3,B="undefined"!=typeof window&&window,C="undefined"!=typeof document&&document,D=B&&history,E=B&&(D.location||B.location),F=e.prototype,G=C&&C.ontouchstart?"touchstart":"click",H=r(),I=!1,J=!1,K=[],L=0;F.m=function(a,b,c){!g(a)||b&&!g(b)?b?this.r(a,b):this.r("@",a):l(a,b,c||!1)},F.s=function(){this.off("*"),this.$=[]},F.e=function(a){this.$.concat("@").some(function(b){var c=("@"===b?p:q)(f(a),f(b));return void 0!==c?(this[z].apply(null,[b].concat(c)),J=!0):void 0},this)},F.r=function(a,b){"@"!==a&&(a="/"+f(a),this.$.push(a)),this.on(a,b)};var M=new e,N=M.m.bind(M);return N.create=function(){var a=new e,b=a.m.bind(a);return b.stop=a.s.bind(a),b},N.base=function(a){n=a||"#",o=i()},N.exec=function(){j(!0)},N.parser=function(c,d){c||d||(p=a,q=b),c&&(p=c),d&&(q=d)},N.query=function(){var a={};return(E.href||o).replace(/[?&](.+?)=([^&]*)/g,function(b,c,d){a[c]=d}),a},N.stop=function(){I&&(B&&(B[u](x,m),B[u](y,m),C[u](G,k)),H[z]("stop"),I=!1)},N.start=function(a){I||(B&&("interactive"===document.readyState||"complete"===document.readyState?d(a):document.onreadystatechange=function(){"interactive"===document.readyState&&setTimeout(function(){d(a)},1)}),I=!0)},window.ESPA.observable=r,N.base(),N.parser(),N}()}(),e()}),a.register("a",["b"],function(a,b){"use strict";function c(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function d(a,b){return ESPA.logger.log("navigate to: "+a),la[a]=b||{},ESPA.route(a),ESPA.trigger("/controllers",a,la),ESPA.trigger("/controllers/"+a+"/view-data",la),"non-test"===ESPA.store.get("app/context/mode")?Promise.reject({error:"navigating to "+a}):Promise.resolve({data:"navigating to "+a})}function f(a,b){if(ESPA.logger.log("registerRoute: "+a),!b)throw new Error("callback not defined, registerRoute needs a callback");ma[a]=b,ESPA.route(a,function(){ma[a](la[a])})}function g(a,b){if(null===a||void 0===a)throw new Error("factory not defined");if(null===b||void 0===b)return a;for(var c in a)a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(){return"http://localhost:8888/"}function i(){return h()+"src/build/"+j()+"/styles/"+j()+".css"}function j(){return ESPA.store.get("app/context/name")}function k(a){for(var b in a)for(var c=b.split(" "),d=c[0],e=c[1],f=a[b],g=document.querySelectorAll(e),h=0;h<g.length;++h){var i=g[h];i.addEventListener(d,f)}}function l(a,b,c){a.length===b.length&&(a.sort().join(",")===b.sort().join(",")?(ESPA.logger.info("Polyfill check complete"),c()):ESPA.logger.error("Polyfill check error"))}function m(a,b){for(var c=function(c){for(var d=a[c],e=d.split("."),f=window,g=0;g<e.length&&(f=f[e[g]]);g++);f?(ESPA.logger.debug("utils.polyfill, already exists: "+d),na.push(d),l(a,na,b)):(ESPA.logger.debug("utils.polyfill, loading: "+d),ESPA.loadResource.jsCallback(h()+"src/build/"+j()+"/polyfill/"+d.toLowerCase()+".js",function(){na.push(d),l(a,na,b)}))},d=0;d<a.length;++d)c(d)}function n(a,b){var c=a+"/"+b.url,d=ESPA.store.get(c);return d?(ESPA.logger.debug("return cached data for GET cacheKey="+c),ESPA.trigger("/fetches/apiGET/"+b.url+"/data",d),d):(ESPA.logger.debug("request: GET url="+b.url),o(a,b.url,{method:"GET"}).then(function(a){return ESPA.logger.debug("response: "+b.url,a),ESPA.trigger("/fetches/apiGET/"+b.url+"/data",a),b.cache&&ESPA.store.set(c,a),a}).catch(function(a){throw ESPA.logger.error(a),new Error("apiGet error")}))}function o(a,b,c){return fetch(a+b,Object.assign(c,{headers:p(),credentials:"include"})).then(function(a){return a.json()}).catch(function(a){throw ESPA.logger.error(a),new Error("_apiSend error")})}function p(){var a=document.querySelector('input[name="__RequestVerificationToken"]');return{"Content-Type":"application/json","X-Frame-Options":"SAMEORIGIN","X-XSRF-Token":a?a.value:""}}function q(a,b){oa[a]=b}function r(a,b){if(oa[a])return n(oa[a],b);throw new Error("${hostKey} Does not exist")}function s(){q("local","http://localhost:8888/"),q("wizardappapi","https://wizardappapi.azurewebsites.net")}function t(){return r("local",{url:"src/build/myapp/mock/dummy.json",cache:!0})}function u(){return ESPA.store.get("myapp/state")||{}}function v(a){ESPA.store.set("myapp/state",a)}function w(a){throw new Error("You must implement onStateChange method")}function x(){return ta}function y(a){ta.currentPage=a.currentPage,ta.nextPage=a.nextPage,ta.backPage=a.backPage,ta.back=a.back,ta.next=a.next,ta.finish=a.finish,ta.cancel=a.cancel,ta.stateListener&&ta.stateListener.onStateChange&&ta.stateListener.onStateChange(ta)}function z(a){ta.stateListener=a}function A(){return ta.currentPage?ta.currentPage.onNext():Promise.reject("currentPage not defined")}function B(){return ta.currentPage?ta.currentPage.onBack():Promise.reject("currentPage not defined")}function C(){return ta.currentPage?ta.currentPage.onCancel():Promise.reject("currentPage not defined")}function D(){ESPA.registerRoute("wizard-container",E),z(ua)}function E(a){return va=a||{},Promise.all([ESPA.loadResource.css(i()),t()]).then(function(a){wa=a[1],va=Object.assign(va,wa),v({}),F()}).catch(function(a){return ESPA.logger.error(a),Promise.reject({error:"_registerRouteCallback promise chain terminated"})})}function F(){document.getElementById("loader").style.display="none",document.getElementById("main-content").innerHTML=ESPA.tmpl(xa.tpl,va),document.getElementById("wizard-button-bar").innerHTML=ESPA.tmpl(xa.tplBar,va),document.getElementById("main-container").style.display="block",k({"click #back-wizard":G,"click #next-wizard":H,"click #cancel-wizard":I}),y({currentPage:null,nextPage:null,backPage:null,back:!1,next:!1,cancel:!0}),ESPA.navigate("page-id-token")}function G(a){a.preventDefault(),console.log("_onBackWizard"),B().then(function(a){if(a){var b=x();ESPA.navigate(b.backPage)}})}function H(a){a.preventDefault(),console.log("_onNextWizard"),A().then(function(a){if(a){var b=x();ESPA.navigate(b.nextPage)}})}function I(a){a.preventDefault(),console.log("_onCancelWizard");C()}function J(){throw new Error("You must implement onNext method")}function K(){throw new Error("You must implement onBack method")}function L(){throw new Error("You must implement onCancel method")}function M(a){return new Promise(function(b,c){b(a)})}function N(){ESPA.registerRoute("page-one",O)}function O(a){Da=a||{};var b=u();return Promise.all([ESPA.loadResource.css(i()),t()]).then(function(a){Ea=a[1],Da=Object.assign(Da,Ea),b.identity.forEach(function(a){"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"==a.name&&(Da.user=a.value),console.log(a)}),Da.entitlements=b.entitlements,P()}).catch(function(a){return ESPA.logger.error(a),Promise.reject({error:"_registerRouteCallback promise chain terminated"})})}function P(){document.getElementById("loader").style.display="none",document.getElementById("wizard-content").innerHTML=ESPA.tmpl(Fa.tpl,Da),document.getElementById("main-container").style.display="block",k({"click #submitActivationKey":Q}),y({currentPage:Ca,nextPage:"page-two",backPage:"page-access-token",back:!0,next:!0,cancel:!0})}function Q(a){a.preventDefault(),new SimpleDate(2e3,2,28).addDays(1);var b=u(),c=document.getElementById("activationKey");b.activationKey=c.value,c=document.getElementById("activationKeyEcho"),c.value=b.activationKey}function R(){ESPA.registerRoute("page-two",S)}function S(a){return Ja=a||{},Promise.all([ESPA.loadResource.css(i()),t()]).then(function(a){Ka=a[1],Ja=Object.assign(Ja,Ka),T()}).catch(function(a){return ESPA.logger.error(a),Promise.reject({error:"_registerRouteCallback promise chain terminated"})})}function T(){document.getElementById("loader").style.display="none",document.getElementById("wizard-content").innerHTML=ESPA.tmpl(La.tpl,Ja),document.getElementById("main-container").style.display="block",k({"click #submitActivationKey":U}),y({currentPage:Ia,nextPage:null,backPage:"page-one",back:!0,next:!1,finish:!0,cancel:!0})}function U(a){a.preventDefault();var b=u(),c=document.getElementById("activationKey");b.activationKey=c.value,c=document.getElementById("activationKeyEcho"),c.value=b.activationKey}function V(a,b){if(b||(b={}),b.headers||(b.headers={}),b.credentials||(b.credentials="include"),b.headers["Content-Type"]||(b.headers["Content-Type"]="application/json"),b.headers.Accept||(b.headers.Accept="application/json"),b.body){"object"===typeof b.body&&(b.body=JSON.stringify(b.body))}var c={};return window.fetch(a,b).then(function(a){return c.response=a,a}).then(function(a){return a.json()}).then(function(a){return"HEAD"===b.method||(c.json=a,c.error=null),c}).catch(function(a){return ESPA.logger.error(a),c.error="exception caught",c.exception=a,c})}function W(){var a={grant_type:"arbitrary_identity",client_id:"arbitrary-resource-owner-client",client_secret:"secret",scope:"wizard",arbitrary_claims:"{'preferred_username': ['porky@pig.com'],'name': ['porky@pig.com']}",subject:"PorkyPig",arbitrary_amrs:"['agent:username:agent0@supporttech.com','agent:challenge:fullSSN','agent:challenge:homeZip']",arbitrary_audiences:"['cat','dog']",custom_payload:"{'b':['cat','dog'],'a': {'0': {'Street1': '0 Montana Ave','Street2': null,'Street3': null,'Zip': '90403','City': 'Santa Monica','State': 'California','Country': 'USA'},'1': {'Street1': '1 Montana Ave','Street2': null,'Street3': null,'Zip': '90403','City': 'Santa Monica','State': 'California','Country': 'USA'}}}"},b=[];for(var c in a){var d=encodeURIComponent(c),e=encodeURIComponent(a[c]);b.push(d+"="+e)}return b=b.join("&"),V("https://p7identityserver4.azurewebsites.net/connect/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:b})}function X(a){var b={id_token:a},c=[];for(var d in b){var e=encodeURIComponent(d),f=encodeURIComponent(b[d]);c.push(e+"="+f)}return c=c.join("&"),V("https://wizardappapi.azurewebsites.net/api/Identity/bind",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:c})}function Y(a){return V("https://wizardappapi.azurewebsites.net/api/Identity/closed",{headers:{Authorization:"Bearer "+a,"x-authScheme":"One"}})}function Z(a){return V("https://wizardappapi.azurewebsites.net/api/RemoteJsonFile/closed?file=entitlements.json",{headers:{Authorization:"Bearer "+a,"x-authScheme":"One"}})}function $(){ESPA.registerRoute("page-access-token",_)}function _(a){Pa=a||{};var b=u();return Promise.all([ESPA.loadResource.css(i())]).then(function(a){Pa=Object.assign(Pa,Qa),Pa.access_token=b.access_token,Pa.data={bar:"Bar This"},aa()}).catch(function(a){return ESPA.logger.error(a),Promise.reject({error:"_registerRouteCallback promise chain terminated"})})}function aa(){document.getElementById("loader").style.display="none",document.getElementById("wizard-content").innerHTML=ESPA.tmpl(Ra.tpl,Pa),document.getElementById("main-container").style.display="block",k({});var a=u();if(a.access_token){document.getElementById("access_token").value=a.access_token}y({currentPage:Oa,nextPage:"page-one",backPage:"page-id-token",back:!0,next:!0,cancel:!0})}function ba(){ESPA.registerRoute("page-id-token",ca)}function ca(a){Va=a||{};var b=u();return Promise.all([ESPA.loadResource.css(i()),W()]).then(function(a){var c=a[1];if(Va=Object.assign(Va,Wa),200!=c.response.status){document.getElementById("id_token_error").innerHTML="id_token has not been created!"}else{var d=c.json;b.id_token=d.id_token}Va.id_token=b.id_token,Va.data={bar:"id_token"},da()}).catch(function(a){return ESPA.logger.error(a),Promise.reject({error:"_registerRouteCallback promise chain terminated"})})}function da(){document.getElementById("loader").style.display="none",document.getElementById("wizard-content").innerHTML=ESPA.tmpl(Xa.tpl,Va),document.getElementById("main-container").style.display="block",k({});var a=u();if(a.access_token){document.getElementById("id_token").value=a.id_token}y({currentPage:Ua,nextPage:"page-access-token",backPage:null,back:!1,next:!0,cancel:!0})}function ea(){ya(),Ga(),Ma(),Sa(),Ya(),ESPA.navigate("/")}function fa(){s(),ea(),u().main="started",ESPA.navigate("wizard-container")}var ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya;return{setters:[function(a){}],execute:function(){ga={},ha=function(){function a(a){return function(b){return new Promise(function(c,d){if(ga[b])c(b);else{var e=document.createElement(a),f="body",g="src";switch(e.onload=function(){c(b),-1==b.toLowerCase().indexOf("espa-bootstrap.js")&&(ga[b]=b)},e.onerror=function(){d(b)},a){case"script":e.async=!0;break;case"link":e.type="text/css",e.rel="stylesheet",g="href",f="head"}e[g]=b,document[f].appendChild(e)}})}}function b(a){return function(b,c){if(ga[b])c(b);else{var d=document.createElement(a),e="body",f="src";switch(d.onload=function(){c(b),-1==b.toLowerCase().indexOf("espa-bootstrap.js")&&(ga[b]=b)},d.onerror=function(){c(b,"fail to load resource")},a){case"script":d.async=!0;break;case"link":d.type="text/css",d.rel="stylesheet",f="href",e="head"}d[f]=b,document[e].appendChild(d)}}}return{css:a("link"),js:a("script"),img:a("img"),cssCallback:b("link"),jsCallback:b("script"),imgCallback:b("img")}}(),ia=function(){return{trace:console.trace,log:console.log,debug:console.debug,info:console.info,warn:console.warn,error:console.error}}(),ja=function(){function a(a){var b=c[a];return void 0!==b?(ESPA.logger.debug("found "+a+" in store with value: ",b),b):(ESPA.logger.debug("cannot find key in store: "+a),null)}function b(a,b){a?(ESPA.logger.debug("save "+a+" in store with value: ",b),c[a]=b):ESPA.logger.debug("cannot set key in store as key is empty")}var c=[];return{get:a,set:b}}(),ka=function(){var a={};return function(b,c){var d=/\W/.test(b)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[b]=a[b]||ka(document.getElementById(b).innerHTML);return c?d(c):d}}(),la={},ma={},ESPA.route.start(),window.ESPA=window.ESPA||{},window.ESPA.loadResource=ha,window.ESPA.getQueryString=c,window.ESPA.navigate=d,window.ESPA.registerRoute=f,window.ESPA.factoryMixin=g,window.ESPA.logger=ia,window.ESPA.store=ja,window.ESPA.tmpl=ka,window.ESPA.observable(window.ESPA),na=[],oa={},pa='<div class="container">\r\n    <h1 class="display-3">\r\n        <%= data.wizard %>!</h1>\r\n    <p>\r\n        <div id="wizard-content"></div>\r\n    </p>\r\n\r\n    <p>\r\n        <div id="wizard-button-bar"></div>\r\n    </p>\r\n</div>',qa='<div class="container">\r\n    <p>\r\n        <a id="back-wizard" class="btn btn-primary btn-lg" href="#" role="button">Back &raquo;</a>\r\n        <a id="next-wizard" class="btn btn-primary btn-lg" href="#" role="button">Next &raquo;</a>\r\n        <a id="cancel-wizard" class="btn btn-primary btn-lg" disabled href="#" role="button">Cancel &raquo;</a>\r\n    </p>\r\n</div>',ra=null,sa=function(a){var b={onStateChange:a&&a.onStateChange?a.onStateChange:w};return ra=ESPA.factoryMixin(b,a)},ta={currentPage:null,nextPage:null,backPage:null,back:null,next:null,finish:null,cancel:null,stateListener:null},ua=sa({onStateChange:function(a){ESPA.logger.log("onStateChange");var b=document.getElementById("back-wizard").classList,c=document.getElementById("next-wizard").classList,d=document.getElementById("cancel-wizard").classList;a.next?c.remove("disabled"):c.add("disabled"),a.back?b.remove("disabled"):b.add("disabled"),a.cancel?d.remove("disabled"):d.add("disabled")}}),va=null,wa=null,xa=null,ya=function(a){var b={cfg:a&&a.cfg?a.cfg:null,tpl:a&&a.tpl?a.tpl:pa,tplBar:a&&a.tplBar?a.tplBar:qa};return xa=ESPA.factoryMixin(b,a),D(),xa},za=null,Aa=function(a){var b={onNext:a&&a.onNext?a.onNext:J,onBack:a&&a.onBack?a.onBack:K,onCancel:a&&a.onCancel?a.onCancel:L};return za=ESPA.factoryMixin(b,a)},Ba='<div class="container">\r\n    <h1 class="display-3">\r\n        <%= user %>\r\n    </h1>\r\n    <p>\r\n        <input id="activationKey" placeholder="enter your activation key...">\r\n        <input id="submitActivationKey" type="button" value="Submit Activation Key"></p>\r\n\r\n    </p>\r\n    <p id="activationKeyEcho"></p>\r\n    <ul id="my-list">\r\n        <% for ( var i = 0; i < entitlements.length; i++ ) { \r\n                var entitlement = entitlements[i];%>\r\n        <li>\r\n            <%= entitlement.name %>\r\n        </li>\r\n\r\n        <% } %>\r\n\r\n\r\n    </ul>\r\n\r\n\r\n\r\n</div>',Ca=Aa({onNext:function(){return console.log("onNext"),M(!0)},onBack:function(){return console.log("onBack"),M(!0)},onCancel:function(){return console.log("onCancel"),M(!0)}}),Da=null,Ea=null,Fa=null,Ga=function(a){var b={cfg:a&&a.cfg?a.cfg:null,tpl:a&&a.tpl?a.tpl:Ba};return Fa=ESPA.factoryMixin(b,a),N(),Fa},Ha='<div class="container">\r\n    <h1 class="display-3">Page Two</h1>\r\n    <p>\r\n        <input id="activationKey" placeholder="enter your activation key...">\r\n        <input id="submitActivationKey" type="button" value="Submit Activation Key"></p>\r\n\r\n    </p>\r\n    <p id="activationKeyEcho"></p>\r\n\r\n</div>',Ia=Aa({onNext:function(){return console.log("onNext"),M(!0)},onBack:function(){return console.log("onBack"),M(!0)},onCancel:function(){return console.log("onCancel"),M(!0)}}),Ja=null,Ka=null,La=null,Ma=function(a){var b={cfg:a&&a.cfg?a.cfg:null,tpl:a&&a.tpl?a.tpl:Ha};return La=ESPA.factoryMixin(b,a),R(),La},Na='<div class="container">\r\n    <h1 class="display-3">access_token</h1>\r\n    <p>\r\n\r\n        <input id="access_token" placeholder="enter your access_token..." value="<%= access_token%>"">\r\n    </p>\r\n    <p id="access_token_error"></p>\r\n\r\n</div>',Oa=Aa({onNext:function(){console.log("onNext");var a=document.getElementById("access_token"),b=u();b.access_token=a.value;var c=Promise.all([Y(b.access_token).then(function(a){return a}).catch(function(a){throw ESPA.logger.error(e),new Error("apiPost error")}),Z(b.access_token).then(function(a){return a}).catch(function(a){throw ESPA.logger.error(e),new Error("apiPost error")})]).then(function(a){var c=!1,d=a[0],e=a[1];if(200!=d.response.status){var f=document.getElementById("access_token_error");f.innerHTML="access_token has been rejected!"}else b.identity=d.json,c=!0;if(200!=e.response.status){var f=document.getElementById("access_token_error");f.innerHTML="entitlementResult!"}else b.entitlements=e.json.entitlements;return c}).catch(function(a){return ESPA.logger.error(a),Promise.reject({error:"_registerRouteCallback promise chain terminated"})});new Promise(function(a,c){Y(b.access_token).then(function(c){if(200!=c.response.status){document.getElementById("access_token_error").innerHTML="access_token has been rejected!",a(!1)}else b.identity=c.json,a(!0)}).catch(function(a){c(!1),console.log("There has been a problem with your fetch operation: ",a.message)})});return c},onBack:function(){return console.log("onBack"),M(!0)},onCancel:function(){return console.log("onCancel"),M(!0)}}),Pa=null,Qa=null,Ra=null,Sa=function(a){var b={cfg:a&&a.cfg?a.cfg:null,tpl:a&&a.tpl?a.tpl:Na};return Ra=ESPA.factoryMixin(b,a),$(),Ra},Ta='<div class="container">\r\n    <h1 class="display-3">id_token</h1>\r\n    <p>\r\n\r\n        <input id="id_token" placeholder="enter your id_token..." value="<%= id_token%>"">\r\n    </p>\r\n    <p id="id_token_error"></p>\r\n\r\n</div>',Ua=Aa({onNext:function(){console.log("onNext");var a=document.getElementById("id_token"),b=u();return b.id_token=a.value,new Promise(function(a,c){X(b.id_token).then(function(c){if(200!=c.response.status){document.getElementById("id_token_error").innerHTML="id_token has been rejected!",a(!1)}else{var d=c.json;b.access_token=d.access_token,a(!0)}}).catch(function(a){c(!1),console.log("There has been a problem with your fetch operation: ",a.message)})})},onBack:function(){return console.log("onBack"),M(!0)},onCancel:function(){return console.log("onCancel"),M(!0)}}),Va=null,Wa=null,Xa=null,Ya=function(a){var b={cfg:a&&a.cfg?a.cfg:null,tpl:a&&a.tpl?a.tpl:Ta};return Xa=ESPA.factoryMixin(b,a),ba(),Xa},ESPA.store.set("app/context/name","myapp"),ESPA.store.get("app/context/mode")||ESPA.store.set("app/context/mode","non-test"),"non-test"===ESPA.store.get("app/context/mode")&&m(["Object.assign","Object.defineProperties","Object.entries","Object.keys","Object.values","fetch","Promise"],fa)}}})})(function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=a():a()});
//# sourceMappingURL=main.min.js.map