{"version":3,"sources":["webpack:///webpack/bootstrap d6e3440a7141325f3ea9","webpack:///external \"riot\"","webpack:///./plugins/typicode_component/route-contributer.js","webpack:///./plugins/typicode_component/stores/typicode-user-store.js","webpack:///./plugins/typicode_component/css/index.css","webpack:///./plugins/typicode_component/index.js","webpack:///./plugins/typicode_component/pages/home.tag","webpack:///./plugins/typicode_component/pages/my-component-page.tag","webpack:///./plugins/typicode_component/pages/typicode-user-detail.tag"],"names":["RouteContributer","self","riot","observable","name","_initializeViewSet","initialize","_viewsSet","Set","s","add","views","Array","from","defaultRoute","uninitialize","contributeRoutes","r","console","log","EVT","router","out","control","trigger","routeStore","in","riotRouteLoadView","view","indexOf","routeDispatch","userCache","Constants","NAME","NAMESPACE","WELLKNOWN_EVENTS","typicodeInit","typicodeUninit","typicodeUsersFetchResult","typicodeUsersFetch","typicodeUserFetch","typicodeUsersChanged","typicodeUserChanged","window","DeepFreeze","freeze","TypicodeUserStore","typicodeUserStore","fetchException","riotHandlers","event","handler","_onTypicodeUsersFetch","_onTypicodeUserFetch","_onUsersResult","bindEvents","query","url","myAck","evt","fetchStore","fetch","restoredSession","JSON","parse","localStorage","getItem","blah","Cookies","get","id","parseInt","result","filter","obj","found","length","myQuery","type","_resetData","ack","error","response","ok","json","data","localStorageStore","localstorageSet","key","localstorageRemove","code","StoreBase","rcs","registerRecord","stores","store","registrants","routeContributer","postLoadEvents","RandomString","randomString","hash","randomHash","require","tag2","opts","results","resetData","on","onTypicodeUsersChanged","off","update","route","item","onUserChanged","user","q"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA,sB;;;;;;;;;;;;;ACAA;;AACA;;AACA;;;;IAEqBA,gB;AAEnB,8BAAc;AAAA;;AACZ,QAAIC,OAAO,IAAX;;AAEAC,SAAKC,UAAL,CAAgBF,IAAhB;AACAA,SAAKG,IAAL,GAAY,kBAAZ;AACAH,SAAKI,kBAAL;;AAEA,SAAKC,UAAL;AACD;;6BAEDD,kB,iCAAqB;AACnB,QAAIJ,OAAO,IAAX;;AAEAA,SAAKM,SAAL,GAAiB,IAAIC,GAAJ,EAAjB;AACA,QAAIC,IAAIR,KAAKM,SAAb;;AAEAE,MAAEC,GAAF,CAAM,MAAN;AACAD,MAAEC,GAAF,CAAM,mBAAN;AACAD,MAAEC,GAAF,CAAM,sBAAN;AACAT,SAAKU,KAAL,GAAaC,MAAMC,IAAN,CAAWJ,CAAX,CAAb;AACAR,SAAKa,YAAL,GAAoB,yBAApB;AACD,G;;6BACDC,Y,2BAAe,CAEd,C;;6BACDT,U,yBAAa,CAEZ,C;;6BACDU,gB,6BAAiBC,C,EAAG;AAClB,QAAIhB,OAAO,IAAX;;AAEAiB,YAAQC,GAAR,CAAYlB,KAAKG,IAAjB,EAAuBF,KAAKkB,GAAL,CAASC,MAAT,CAAgBC,GAAhB,CAAoBN,gBAA3C,EAA6DC,CAA7D;AACAA,MAAE,8CAAF,EAAkD,YAAI;AACpDC,cAAQC,GAAR,CAAY,0DAAZ;AACAjB,WAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAASK,UAAT,CAAoBC,EAApB,CAAuBC,iBAA5C,EAA+D,0BAA/D;AACD,KAHD;;AAKAV,MAAE,sBAAF,EAA0B,UAACb,IAAD,EAAQ;AAChCc,cAAQC,GAAR,CAAY,yCAAyCf,IAArD;AACA,UAAIwB,OAAOxB,IAAX;;AAEA,UAAIH,KAAKU,KAAL,CAAWkB,OAAX,CAAmBD,IAAnB,MAA6B,CAAC,CAAlC,EAAqC;AACnC1B,aAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAASK,UAAT,CAAoBC,EAApB,CAAuBI,aAA5C,EAA2D7B,KAAKa,YAAhE;AACD,OAFD,MAEO;AACLZ,aAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAASK,UAAT,CAAoBC,EAApB,CAAuBC,iBAA5C,EAA+D,SAASC,IAAxE;AACD;AACF,KATD;AAUAX,MAAE,sBAAF,EAA0B,YAAI;AAC5BC,cAAQC,GAAR,CAAY,uCAAZ;AACAjB,WAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAASK,UAAT,CAAoBC,EAApB,CAAuBI,aAA5C,EAA2D7B,KAAKa,YAAhE;AACD,KAHD;AAID,G;;;;;kBArDkBd,gB;;;;;;;;;;;;;;;;;;;;;ACHrB,IAAM+B,YAAY,mBAAlB;;IAEMC,S;;;;AACNA,UAAUC,IAAV,GAAiB,qBAAjB;AACAD,UAAUE,SAAV,GAAsBF,UAAUC,IAAV,GAAiB,GAAvC;AACAD,UAAUG,gBAAV,GAA6B;AAC3BT,MAAI;AACFU,kBAAc,eADZ;AAEFC,oBAAgB,iBAFd;AAGFC,8BAA0B,6BAHxB;AAIFC,wBAAoB,sBAJlB;AAKFC,uBAAmB;AALjB,GADuB;AAQ3BlB,OAAK;AACHmB,0BAAsB,wBADnB;AAEHC,yBAAqB;AAFlB;AARsB,CAA7B;AAaAC,OAAO,cAAP,EAAuBC,UAAvB,CAAkCC,MAAlC,CAAyCb,SAAzC;;IAEqBc,iB;;;AAEnB,+BAAc;AAAA;;AAAA,iDACZ,8BADY;;AAEZ5C,SAAKC,UAAL,QAFY,CAEW;AACvB,UAAKC,IAAL,GAAY,mBAAZ;AACAF,SAAKkB,GAAL,CAAS2B,iBAAT,GAA6Bf,UAAUG,gBAAvC;AACA,UAAKa,cAAL,GAAsB,IAAtB;AACA,UAAKC,YAAL,GAAoB,CAClB,EAACC,OAAOlB,UAAUG,gBAAV,CAA2BT,EAA3B,CAA8Ba,kBAAtC,EAA0DY,SAAS,MAAKC,qBAAxE,EADkB,EAElB,EAACF,OAAOlB,UAAUG,gBAAV,CAA2BT,EAA3B,CAA8Bc,iBAAtC,EAAyDW,SAAS,MAAKE,oBAAvE,EAFkB,EAGlB,EAACH,OAAOlB,UAAUG,gBAAV,CAA2BT,EAA3B,CAA8BY,wBAAtC,EAAgEa,SAAS,MAAKG,cAA9E,EAHkB,CAApB;AAKA,UAAKC,UAAL;AAXY;AAYb;;8BAIDH,qB,kCAAsBI,K,EAAO;AAC3BtC,YAAQC,GAAR,CAAYjB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BrB,EAA3B,CAA8Ba,kBAA1C;AACA,QAAIkB,MAAM,4CAAV;AACA,QAAIC,QAAQ;AACVC,WAAKzD,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BrB,EAA3B,CAA8BY;AADzB,KAAZ;;AAIA,QAAIkB,KAAJ,EAAW;AACTE,YAAMF,KAAN,GAAcA,KAAd;AACD;;AAEDtD,SAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAASwC,UAAT,CAAoBlC,EAApB,CAAuBmC,KAA5C,EAAmDJ,GAAnD,EAAwD,IAAxD,EAA8DC,KAA9D;AACD,G;;8BAEDL,oB,iCAAqBG,K,EAAO;AAC1BtC,YAAQC,GAAR,CAAYjB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BrB,EAA3B,CAA8Bc,iBAA1C;AACA,QAAIsB,kBAAkBC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqBnC,SAArB,CAAX,CAAtB;AACA,QAAIoC,OAAOjE,KAAKkE,OAAL,CAAaC,GAAb,CAAiB,gBAAjB,CAAX;AACA,QAAIC,KAAKC,SAASf,MAAMc,EAAf,EAAmB,EAAnB,CAAT,CAJ0B,CAIQ;;AAElC,QAAIR,eAAJ,EAAqB;AACnB,UAAIU,SAASV,gBAAgBW,MAAhB,CAAuB,UAAUC,GAAV,EAAe;AACjD,YAAIC,QAAQD,IAAIJ,EAAJ,KAAWA,EAAvB;;AAEA,eAAOK,KAAP;AACD,OAJY,CAAb;;AAMA,UAAIH,UAAUA,OAAOI,MAAP,GAAgB,CAA9B,EAAiC;AAC/B,aAAKpD,OAAL,CAAatB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BzB,GAA3B,CAA+BoB,mBAA5C,EAAiE8B,OAAO,CAAP,CAAjE;AACD;AACF,KAVD,MAUO;AACC;AACN,UAAIK,UAAU;AACZC,cAAM,oBADM;AAEZnB,aAAKzD,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BrB,EAA3B,CAA8Bc,iBAFvB;AAGZgB,eAAOA,KAHK;AAIZW,cAAMA;AAJM,OAAd;;AAOAjE,WAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BrB,EAA3B,CAA8Ba,kBAAnD,EAAuEsC,OAAvE;AACD;AACF,G;AACD;;;;;8BAGAE,U,yBAAa;AACX,SAAK/B,cAAL,GAAsB,IAAtB;AACD,G;;8BAEDM,c,2BAAekB,M,EAAQQ,G,EAAK;AAC1B9D,YAAQC,GAAR,CAAYjB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BrB,EAA3B,CAA8BY,wBAA1C,EAAoEkC,MAApE,EAA4EQ,GAA5E;AACA,QAAIR,OAAOS,KAAP,IAAgB,IAAhB,IAAwBT,OAAOU,QAAP,CAAgBC,EAAxC,IAA8CX,OAAOY,IAAzD,EAA+D;AACvD;AACN,UAAIC,OAAOb,OAAOY,IAAlB;;AAEAlF,WAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAASkE,iBAAT,CAA2B5D,EAA3B,CAA8B6D,eAAnD,EAAoE,EAACC,KAAKzD,SAAN,EAAiBsD,MAAMA,IAAvB,EAApE;AACA,WAAK7D,OAAL,CAAatB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BzB,GAA3B,CAA+BmB,oBAA5C,EAAkE4C,IAAlE;AACA,UAAIL,IAAIxB,KAAR,EAAe;AACb,YAAIA,QAAQwB,IAAIxB,KAAhB;;AAEA,YAAIA,MAAMsB,IAAN,KAAe,oBAAnB,EAAyC;AACvC5E,eAAKqB,OAAL,CAAaC,OAAb,CAAqBgC,MAAMG,GAA3B,EAAgCH,MAAMA,KAAtC;AACD;AACF;AACF,KAbD,MAaO;AACC;AACNtD,WAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAASkE,iBAAT,CAA2B5D,EAA3B,CAA8B+D,kBAAnD,EAAuE,EAACD,KAAKzD,SAAN,EAAvE;AACA7B,WAAKqB,OAAL,CAAaC,OAAb,CAAqB,4BAArB,EAAmD,EAACkE,MAAM,kBAAP,EAAnD;AACD;AACF,G;;;;wBAxEsB;AACrB,aAAO1D,SAAP;AACD;;;;EAjB4CW,OAAO,cAAP,EAAuBgD,S;;kBAAjD7C,iB;;;;;;ACrBrB,yC;;;;;;;;;ACAA;;AACA;;AACA;;;;AACA;;;;;;AAEA,IAAI8C,MAAM,gCAAV;AACA,IAAIC,iBAAiB;AACnBzF,QAAM,oBADa;AAEnB0F,UAAQ,CACR,EAACC,OAAO,iCAAR,EADQ,CAFW;AAKnBC,eAAa;AACXC,sBAAkBL;AADP,GALM;AAQnBM,kBAAgB,CAChB,EAAChD,OAAO,eAAR,EAAyBmC,MAAM,EAA/B,EADgB;AARG,CAArB;;AAaA,IAAI1C,OAAOwD,YAAX,EAAyB;AACvB,MAAIC,eAAe,IAAIzD,OAAOwD,YAAX,EAAnB;AACA,MAAIE,OAAOD,aAAaE,UAAb,EAAX;;AAEA3D,SAAO0D,IAAP,GAAcA,IAAd;AACD;;AAEDnG,KAAKqB,OAAL,CAAaC,OAAb,CAAqB,qBAArB,EAA4CqE,cAA5C,E;;;;;;;;;ACzBI,IAAI3F,OAAO,mBAAAqG,CAAQ,CAAR,CAAX;AACArG,KAAKsG,IAAL,CAAU,UAAV,EAAsB,qYAAtB,EAA6Z,EAA7Z,EAAia,EAAja,EAAqa,UAASC,IAAT,EAAe,CACvb,CADG,E;;;;;;;;;ACDA,IAAIvG,OAAO,mBAAAqG,CAAQ,CAAR,CAAX;AACArG,KAAKsG,IAAL,CAAU,uBAAV,EAAmC,ilBAAnC,EAAsnB,EAAtnB,EAA0nB,EAA1nB,EAA8nB,UAASC,IAAT,EAAe;AAChpB,MAAIxG,OAAO,IAAX;AACAA,OAAKgF,KAAL,GAAa,KAAb;AACChF,OAAKyG,OAAL,GAAe,EAAf;;AAEAzG,OAAK0G,SAAL,GAAiB,YAAW;AAC1B1G,SAAKyG,OAAL,GAAe,EAAf;AACAzG,SAAKgF,KAAL,GAAa,KAAb;AACD,GAHD;;AAKDhF,OAAK2G,EAAL,CAAQ,OAAR,EAAiB,YAAM;AAClB1F,YAAQC,GAAR,CAAY,sBAAZ;AACAjB,SAAKqB,OAAL,CAAaqF,EAAb,CAAgB1G,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BzB,GAA3B,CAA+BmB,oBAA/C,EAAoExC,KAAK4G,sBAAzE;AACA3G,SAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BrB,EAA3B,CAA8Ba,kBAAnD;AACD,GAJJ;AAKGtC,OAAK2G,EAAL,CAAQ,SAAR,EAAmB,YAAM;AACvB1F,YAAQC,GAAR,CAAY,wBAAZ;AACAjB,SAAKqB,OAAL,CAAauF,GAAb,CAAiB5G,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BzB,GAA3B,CAA+BmB,oBAAhD,EAAqExC,KAAK4G,sBAA1E;AACD,GAHD;AAIH5G,OAAK4G,sBAAL,GAA8B,UAACrC,MAAD,EAAW;AACnCtD,YAAQC,GAAR,CAAYjB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BzB,GAA3B,CAA+BmB,oBAA3C;AACAxC,SAAKyG,OAAL,GAAelC,MAAf;AACAtD,YAAQC,GAAR,CAAYlB,KAAKyG,OAAjB;AACAzG,SAAK8G,MAAL;AACF,GALJ;AAMC9G,OAAK+G,KAAL,GAAa,UAACrD,GAAD,EAAS;AACtBzD,SAAKqB,OAAL,CAAaC,OAAb,CAAqB,qBAArB,EACA,+CAA6CmC,IAAIsD,IAAJ,CAAS3C,EADtD;AAEE,GAHF;AAID,CA7BG,E;;;;;;;;;ACDA,IAAIpE,OAAO,mBAAAqG,CAAQ,CAAR,CAAX;AACArG,KAAKsG,IAAL,CAAU,0BAAV,EAAsC,g9EAAtC,EAAw/E,EAAx/E,EAA4/E,EAA5/E,EAAggF,UAASC,IAAT,EAAe;AAC/gF,QAAIxG,OAAO,IAAX;;AAEAA,SAAKuE,MAAL,GAAc,IAAd;AACAvE,SAAKiH,aAAL,GAAqB,UAACC,IAAD,EAAU;AAC3BlH,aAAKuE,MAAL,GAAc2C,IAAd;AACAjG,gBAAQC,GAAR,CAAYlB,KAAKuE,MAAjB;AACAvE,aAAK8G,MAAL;AACH,KAJD;;AAMA9G,SAAK2G,EAAL,CAAQ,OAAR,EAAiB,YAAW;AACxB,YAAIQ,IAAIlH,KAAK8G,KAAL,CAAWxD,KAAX,EAAR;AACAtC,gBAAQC,GAAR,CAAY,gCAAZ,EAA6CiG,CAA7C;AACAlH,aAAKqB,OAAL,CAAaqF,EAAb,CAAgB1G,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BzB,GAA3B,CAA+BoB,mBAA/C,EAAoEzC,KAAKiH,aAAzE;;AAEAhH,aAAKqB,OAAL,CAAaC,OAAb,CAAqBtB,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BrB,EAA3B,CAA8Bc,iBAAnD,EAAsE,EAAE8B,IAAI8C,EAAE9C,EAAR,EAAtE;AACH,KAND;;AAQArE,SAAK2G,EAAL,CAAQ,SAAR,EAAmB,YAAW;AAC1B1F,gBAAQC,GAAR,CAAY,aAAZ;AACAjB,aAAKqB,OAAL,CAAauF,GAAb,CAAiB5G,KAAKkB,GAAL,CAAS2B,iBAAT,CAA2BzB,GAA3B,CAA+BoB,mBAAhD,EAAqEzC,KAAKiH,aAA1E;AACH,KAHD;AAKH,CAvBG,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6e3440a7141325f3ea9","module.exports = riot;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"riot\"\n// module id = 0\n// module chunks = 0","import './pages/my-component-page.tag';\r\nimport './pages/typicode-user-detail.tag';\r\nimport './pages/home.tag';\r\n\r\nexport default class RouteContributer {\r\n\r\n  constructor() {\r\n    var self = this;\r\n\r\n    riot.observable(self);\r\n    self.name = 'RouteContributer';\r\n    self._initializeViewSet();\r\n\r\n    this.initialize();\r\n  }\r\n\r\n  _initializeViewSet() {\r\n    var self = this;\r\n\r\n    self._viewsSet = new Set();\r\n    let s = self._viewsSet;\r\n\r\n    s.add('home');\r\n    s.add('my-component-page');\r\n    s.add('typicode-user-detail');\r\n    self.views = Array.from(s);\r\n    self.defaultRoute = '/my-component-page/home';\r\n  }\r\n  uninitialize() {\r\n\r\n  }\r\n  initialize() {\r\n\r\n  }\r\n  contributeRoutes(r) {\r\n    var self = this;\r\n\r\n    console.log(self.name, riot.EVT.router.out.contributeRoutes, r);\r\n    r('/my-component-page/typicode-user-detail?id=*', ()=>{\r\n      console.log('route handler of /my-component-page/typicode-user-detail');\r\n      riot.control.trigger(riot.EVT.routeStore.in.riotRouteLoadView, 'mpc-typicode-user-detail');\r\n    });\r\n\r\n    r('/my-component-page/*', (name)=>{\r\n      console.log('route handler of /my-component-page/' + name);\r\n      let view = name;\r\n\r\n      if (self.views.indexOf(view) === -1) {\r\n        riot.control.trigger(riot.EVT.routeStore.in.routeDispatch, self.defaultRoute);\r\n      } else {\r\n        riot.control.trigger(riot.EVT.routeStore.in.riotRouteLoadView, 'mpc-' + view);\r\n      }\r\n    });\r\n    r('/my-component-page..', ()=>{\r\n      console.log('route handler of /my-component-page..');\r\n      riot.control.trigger(riot.EVT.routeStore.in.routeDispatch, self.defaultRoute);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./plugins/typicode_component/route-contributer.js","\r\nconst userCache = 'typicodeUserCache';\r\n\r\nclass Constants {}\r\nConstants.NAME = 'typicode-user-store';\r\nConstants.NAMESPACE = Constants.NAME + ':';\r\nConstants.WELLKNOWN_EVENTS = {\r\n  in: {\r\n    typicodeInit: 'typicode-init',\r\n    typicodeUninit: 'typicode-uninit',\r\n    typicodeUsersFetchResult: 'typicode-users-fetch-result',\r\n    typicodeUsersFetch: 'typicode-users-fetch',\r\n    typicodeUserFetch: 'typicode-user-fetch'\r\n  },\r\n  out: {\r\n    typicodeUsersChanged: 'typicode-users-changed',\r\n    typicodeUserChanged: 'typicode-user-changed'\r\n  }\r\n};\r\nwindow['p7-host-core'].DeepFreeze.freeze(Constants);\r\n\r\nexport default class TypicodeUserStore extends window['p7-host-core'].StoreBase {\r\n\r\n  constructor() {\r\n    super();\r\n    riot.observable(this); // Riot provides our event emitter.\r\n    this.name = 'TypicodeUserStore';\r\n    riot.EVT.typicodeUserStore = Constants.WELLKNOWN_EVENTS;\r\n    this.fetchException = null;\r\n    this.riotHandlers = [\r\n      {event: Constants.WELLKNOWN_EVENTS.in.typicodeUsersFetch, handler: this._onTypicodeUsersFetch},\r\n      {event: Constants.WELLKNOWN_EVENTS.in.typicodeUserFetch, handler: this._onTypicodeUserFetch},\r\n      {event: Constants.WELLKNOWN_EVENTS.in.typicodeUsersFetchResult, handler: this._onUsersResult}\r\n    ];\r\n    this.bindEvents();\r\n  }\r\n  static get constants() {\r\n    return Constants;\r\n  }\r\n  _onTypicodeUsersFetch(query) {\r\n    console.log(riot.EVT.typicodeUserStore.in.typicodeUsersFetch);\r\n    let url = 'https://jsonplaceholder.typicode.com/users';\r\n    let myAck = {\r\n      evt: riot.EVT.typicodeUserStore.in.typicodeUsersFetchResult\r\n    };\r\n\r\n    if (query) {\r\n      myAck.query = query;\r\n    }\r\n\r\n    riot.control.trigger(riot.EVT.fetchStore.in.fetch, url, null, myAck);\r\n  }\r\n\r\n  _onTypicodeUserFetch(query) {\r\n    console.log(riot.EVT.typicodeUserStore.in.typicodeUserFetch);\r\n    let restoredSession = JSON.parse(localStorage.getItem(userCache));\r\n    let blah = riot.Cookies.get('blah-blah-blah');\r\n    let id = parseInt(query.id, 10);  // query.id is a string\r\n\r\n    if (restoredSession) {\r\n      let result = restoredSession.filter(function (obj) {\r\n        let found = obj.id === id;\r\n\r\n        return found;\r\n      });\r\n\r\n      if (result && result.length > 0) {\r\n        this.trigger(riot.EVT.typicodeUserStore.out.typicodeUserChanged, result[0]);\r\n      }\r\n    } else {\r\n            // need to fetch.\r\n      let myQuery = {\r\n        type: 'riotControlTrigger',\r\n        evt: riot.EVT.typicodeUserStore.in.typicodeUserFetch,\r\n        query: query,\r\n        blah: blah\r\n      };\r\n\r\n      riot.control.trigger(riot.EVT.typicodeUserStore.in.typicodeUsersFetch, myQuery);\r\n    }\r\n  }\r\n  /**\r\n     * Reset tag attributes to hide the errors and cleaning the results list\r\n     */\r\n  _resetData() {\r\n    this.fetchException = null;\r\n  };\r\n\r\n  _onUsersResult(result, ack) {\r\n    console.log(riot.EVT.typicodeUserStore.in.typicodeUsersFetchResult, result, ack);\r\n    if (result.error == null && result.response.ok && result.json) {\r\n            // good\r\n      let data = result.json;\r\n\r\n      riot.control.trigger(riot.EVT.localStorageStore.in.localstorageSet, {key: userCache, data: data});\r\n      this.trigger(riot.EVT.typicodeUserStore.out.typicodeUsersChanged, data);\r\n      if (ack.query) {\r\n        let query = ack.query;\r\n\r\n        if (query.type === 'riotControlTrigger') {\r\n          riot.control.trigger(query.evt, query.query);\r\n        }\r\n      }\r\n    } else {\r\n            // Bad.. Wipe the local storage\r\n      riot.control.trigger(riot.EVT.localStorageStore.in.localstorageRemove, {key: userCache});\r\n      riot.control.trigger('ErrorStore:error-catch-all', {code: 'typeicode-143523'});\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./plugins/typicode_component/stores/typicode-user-store.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./plugins/typicode_component/css/index.css\n// module id = 3\n// module chunks = 0","import 'riot';\r\nimport './css/index.css';\r\nimport TypicodeUserStore \t\t\tfrom \t'./stores/typicode-user-store.js';\r\nimport RouteContributer \t\tfrom \t'./route-contributer.js';\r\n\r\nlet rcs = new RouteContributer();\r\nlet registerRecord = {\r\n  name: 'typicode-component',\r\n  stores: [\r\n\t\t{store: new TypicodeUserStore()}\r\n  ],\r\n  registrants: {\r\n    routeContributer: rcs\r\n  },\r\n  postLoadEvents: [\r\n\t\t{event: 'typicode-init', data: {}}\r\n  ]\r\n};\r\n\r\nif (window.RandomString) {\r\n  let randomString = new window.RandomString();\r\n  let hash = randomString.randomHash();\r\n\r\n  window.hash = hash;\r\n}\r\n\r\nriot.control.trigger('plugin-registration', registerRecord);\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./plugins/typicode_component/index.js","\n    var riot = require('riot')\n    riot.tag2('mpc-home', '<div class=\"panel panel-default\"> <div class=\"panel-heading\">My Component</div> <div class=\"panel-body\"> <div class=\"well\"> I am located in a prebuilt bundle.js. I am a full blown SPA as far as I am concerned, as I just had to follow a few rules that the hosting SPA required. </div> </div> </div> <a href=\"#my-component-page/my-component-page\" class=\"btn btn-default\">TypiCode Users</a>', '', '', function(opts) {\n});\n    \n  \n\n\n// WEBPACK FOOTER //\n// ./plugins/typicode_component/pages/home.tag","\n    var riot = require('riot')\n    riot.tag2('mpc-my-component-page', '<div class=\"panel panel-default\"> <div class=\"panel-heading\">TypiCode Users</div> <div class=\"panel-body\"> <div class=\"well\"> This pulls users from https://jsonplaceholder.typicode.com/ </div> <table class=\"table table-striped table-hover \"> <thead> <tr> <th>id</th> <th>username</th> <th>name</th> <th>email</th> <th>phone</th> <th>details</th> </tr> </thead> <tbody> <tr each=\"{this.results}\"> <td>{this.id}</td> <td>{this.username}</td> <td>{this.name}</td> <td>{this.email}</td> <td>{this.phone}</td> <td><a onclick=\"{parent.route}\">More...</a></td> </tr> </tbody> </table> </div> </div>', '', '', function(opts) {\n\tvar self = this;\n\tself.error = false;\n  self.results = [];\n\n  self.resetData = function() {\n    self.results = [];\n    self.error = false;\n  }\n\n\tself.on('mount', () => {\n      console.log('typicode-users mount')\n      riot.control.on(riot.EVT.typicodeUserStore.out.typicodeUsersChanged,self.onTypicodeUsersChanged);\n      riot.control.trigger(riot.EVT.typicodeUserStore.in.typicodeUsersFetch);\n    });\n    self.on('unmount', () => {\n      console.log('typicode-users unmount')\n      riot.control.off(riot.EVT.typicodeUserStore.out.typicodeUsersChanged,self.onTypicodeUsersChanged);\n    });\n\tself.onTypicodeUsersChanged = (result) =>{\n       console.log(riot.EVT.typicodeUserStore.out.typicodeUsersChanged);\n       self.results = result;\n       console.log(self.results);\n       self.update();\n    }\n  self.route = (evt) => {\n\t\triot.control.trigger('riot-route-dispatch',\n\t\t'my-component-page/typicode-user-detail?id='+evt.item.id);\n\t  };\n});\n\n    \n  \n\n\n// WEBPACK FOOTER //\n// ./plugins/typicode_component/pages/my-component-page.tag","\n    var riot = require('riot')\n    riot.tag2('mpc-typicode-user-detail', '<div if=\"{result != null}\" class=\"panel panel-default\"> <div class=\"panel-heading\"> <h3 class=\"panel-title\">{result.name}</h3> </div> <div class=\"panel-body\"> <form class=\"form-horizontal\"> <fieldset> <legend>User Details</legend> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Name</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.name}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Email</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.email}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Phone</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.phone}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">User Name</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.username}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Web Site</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.website}</p> </div> </div> </fieldset> </form> <form class=\"form-horizontal\"> <fieldset> <legend>Address</legend> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Suite</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.address.suite}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Street</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.address.street}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">City</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.address.city}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Zip Code</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.address.zipcode}</p> </div> </div> </fieldset> </form> <form class=\"form-horizontal\"> <fieldset> <legend>Company</legend> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Name</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.company.name}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Catch Phrase</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.company.catchPhrase}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Business Statement</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.company.bs}</p> </div> </div> </fieldset> </form> </div> </div>', '', '', function(opts) {\n    var self = this;\n\n    self.result = null;\n    self.onUserChanged = (user) => {\n        self.result = user;\n        console.log(self.result);\n        self.update();\n    }\n\n    self.on('mount', function() {\n        var q = riot.route.query();\n        console.log('on mount: typicode-user-detail',q);\n        riot.control.on(riot.EVT.typicodeUserStore.out.typicodeUserChanged, self.onUserChanged);\n\n        riot.control.trigger(riot.EVT.typicodeUserStore.in.typicodeUserFetch, { id: q.id });\n    });\n\n    self.on('unmount', function() {\n        console.log('on unmount:');\n        riot.control.off(riot.EVT.typicodeUserStore.out.typicodeUserChanged, self.onUserChanged);\n    });\n\n});\n    \n  \n\n\n// WEBPACK FOOTER //\n// ./plugins/typicode_component/pages/typicode-user-detail.tag"],"sourceRoot":""}