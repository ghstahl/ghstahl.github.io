{"version":3,"file":"bundle.js","sources":["webpack:///webpack/bootstrap b967366a16d91925add2","webpack:///external \"riot\"","webpack:///app/stores/route-contribution-store.js","webpack:///app/stores/typicode-user-store.js","webpack:///app/pages/home.tag","webpack:///app/pages/my-component-page.tag","webpack:///app/pages/typicode-user-detail.tag","webpack:///./app/css/index.css","webpack:///app/index.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b967366a16d91925add2","module.exports = riot;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"riot\"\n// module id = 0\n// module chunks = 0","export default class RouteContributionStore {\r\n\r\n  constructor() {\r\n    var self = this;\r\n\r\n    self.name = 'RouteContributionStore';\r\n    self._initializeViewSet();\r\n  }\r\n\r\n  _initializeViewSet() {\r\n    var self = this;\r\n\r\n    self._viewsSet = new Set();\r\n    let s = self._viewsSet;\r\n\r\n    s.add('home');\r\n    s.add('my-component-page');\r\n    s.add('typicode-user-detail');\r\n    self.views = Array.from(s);\r\n    self.defaultRoute = '/my-component-page/home';\r\n  }\r\n  uninitialize() {}\r\n  initialize() {\r\n    var self = this;\r\n\r\n    riot.observable(self);\r\n    self.on(riot.EVT.router.out.contributeRoutes, (r) => {\r\n      console.log(self.name, riot.EVT.router.out.contributeRoutes, r);\r\n      r('/my-component-page/typicode-user-detail?id=*', ()=>{\r\n        console.log('route handler of /my-component-page/typicode-user-detail');\r\n        riot.control.trigger(riot.EVT.routeStore.in.riotRouteLoadView, 'mpc-typicode-user-detail');\r\n      });\r\n\r\n      r('/my-component-page/*', (name)=>{\r\n        console.log('route handler of /my-component-page/' + name);\r\n        let view = name;\r\n\r\n        if (self.views.indexOf(view) === -1) {\r\n          riot.control.trigger(riot.EVT.routeStore.in.routeDispatch, self.defaultRoute);\r\n        } else {\r\n          riot.control.trigger(riot.EVT.routeStore.in.riotRouteLoadView, 'mpc-' + view);\r\n        }\r\n      });\r\n      r('/my-component-page..', ()=>{\r\n        console.log('route handler of /my-component-page..');\r\n        riot.control.trigger(riot.EVT.routeStore.in.routeDispatch, self.defaultRoute);\r\n      });\r\n    });\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// app/stores/route-contribution-store.js","\r\nconst userCache = 'typicodeUserCache';\r\n\r\nexport default class TypicodeUserStore {\r\n\r\n  constructor() {\r\n    riot.observable(this); // Riot provides our event emitter.\r\n    this.name = 'TypicodeUserStore';\r\n    riot.EVT.typicodeUserStore = {\r\n      in: {\r\n        typicodeInit: 'typicode-init',\r\n        typicodeUninit: 'typicode-uninit',\r\n        typicodeUsersFetchResult: 'typicode-users-fetch-result',\r\n        typicodeUsersFetch: 'typicode-users-fetch',\r\n        typicodeUserFetch: 'typicode-user-fetch'\r\n      },\r\n      out: {\r\n        typicodeUsersChanged: 'typicode-users-changed',\r\n        typicodeUserChanged: 'typicode-user-changed'\r\n      }\r\n    };\r\n\r\n    this.fetchException = null;\r\n  }\r\n\r\n  _onTypicodeUsersFetch(query) {\r\n    console.log(riot.EVT.typicodeUserStore.in.typicodeUsersFetch);\r\n    let url = 'https://jsonplaceholder.typicode.com/users';\r\n    let trigger = {\r\n      name: riot.EVT.typicodeUserStore.in.typicodeUsersFetchResult\r\n    };\r\n\r\n    if (query) {\r\n      trigger.query = query;\r\n    }\r\n\r\n    riot.control.trigger(riot.EVT.fetchStore.in.fetch, url, null, trigger);\r\n  }\r\n\r\n  _onTypicodeUserFetch(query) {\r\n    console.log(riot.EVT.typicodeUserStore.in.typicodeUserFetch);\r\n    let restoredSession = JSON.parse(localStorage.getItem(userCache));\r\n\r\n    let id = parseInt(query.id, 10);  // query.id is a string\r\n\r\n    if (restoredSession) {\r\n      let result = restoredSession.filter(function (obj) {\r\n        let found = obj.id === id;\r\n\r\n        return found;\r\n      });\r\n\r\n      if (result && result.length > 0) {\r\n        this.trigger(riot.EVT.typicodeUserStore.out.typicodeUserChanged, result[0]);\r\n      }\r\n    } else {\r\n            // need to fetch.\r\n      let myQuery = {\r\n        type: 'riotControlTrigger',\r\n        evt: riot.EVT.typicodeUserStore.in.typicodeUserFetch,\r\n        query: query\r\n      };\r\n\r\n      riot.control.trigger(riot.EVT.typicodeUserStore.in.typicodeUsersFetch, myQuery);\r\n    }\r\n  }\r\n\r\n  uninitialize() {\r\n    this.off(riot.EVT.typicodeUserStore.in.typicodeUsersFetch, this._onTypicodeUsersFetch);\r\n    this.off(riot.EVT.typicodeUserStore.in.typicodeUserFetch, this._onTypicodeUserFetch);\r\n    this.off(riot.EVT.typicodeUserStore.in.typicodeUsersFetchResult, this._onUsersResult);\r\n    riot.EVT.typicodeUserStore = null;\r\n  }\r\n  initialize() {\r\n\r\n    this.on(riot.EVT.typicodeUserStore.in.typicodeUsersFetchResult, this._onUsersResult);\r\n    this.on(riot.EVT.typicodeUserStore.in.typicodeUsersFetch, this._onTypicodeUsersFetch);\r\n    this.on(riot.EVT.typicodeUserStore.in.typicodeUserFetch, this._onTypicodeUserFetch);\r\n  }\r\n\r\n  /**\r\n     * Reset tag attributes to hide the errors and cleaning the results list\r\n     */\r\n  _resetData() {\r\n    this.fetchException = null;\r\n  };\r\n\r\n  _onUsersResult(result, myTrigger) {\r\n    console.log(riot.EVT.typicodeUserStore.in.typicodeUsersFetchResult, result, myTrigger);\r\n    if (result.error == null && result.response.ok && result.json) {\r\n            // good\r\n      let data = result.json;\r\n\r\n      riot.control.trigger(riot.EVT.localStorageStore.in.localstorageSet, {key: userCache, data: data});\r\n      this.trigger(riot.EVT.typicodeUserStore.out.typicodeUsersChanged, data);\r\n      if (myTrigger.query) {\r\n        let query = myTrigger.query;\r\n\r\n        if (query.type === 'riotControlTrigger') {\r\n          riot.control.trigger(query.evt, query.query);\r\n        }\r\n      }\r\n    } else {\r\n            // Bad.. Wipe the local storage\r\n      riot.control.trigger(riot.EVT.localStorageStore.in.localstorageRemove, {key: userCache});\r\n      riot.control.trigger('ErrorStore:error-catch-all', {code: 'typeicode-143523'});\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// app/stores/typicode-user-store.js","\n    var riot = require('riot')\n    riot.tag2('mpc-home', '<div class=\"panel panel-default\"> <div class=\"panel-heading\">My Component</div> <div class=\"panel-body\"> <div class=\"well\"> I am located in a prebuilt bundle.js. I am a full blown SPA as far as I am concerned, as I just had to follow a few rules that the hosting SPA required. </div> </div> </div> <a href=\"#my-component-page/my-component-page\" class=\"btn btn-default\">TypiCode Users</a>', '', '', function(opts) {\n});\n    \n  \n\n\n// WEBPACK FOOTER //\n// app/pages/home.tag","\n    var riot = require('riot')\n    riot.tag2('mpc-my-component-page', '<div class=\"panel panel-default\"> <div class=\"panel-heading\">TypiCode Users</div> <div class=\"panel-body\"> <div class=\"well\"> This pulls users from https://jsonplaceholder.typicode.com/ </div> <table class=\"table table-striped table-hover \"> <thead> <tr> <th>id</th> <th>username</th> <th>name</th> <th>email</th> <th>phone</th> <th>details</th> </tr> </thead> <tbody> <tr each=\"{this.results}\"> <td>{this.id}</td> <td>{this.username}</td> <td>{this.name}</td> <td>{this.email}</td> <td>{this.phone}</td> <td><a onclick=\"{parent.route}\">More...</a></td> </tr> </tbody> </table> </div> </div>', '', '', function(opts) {\n\tvar self = this;\n\tself.error = false;\n  self.results = [];\n\n  self.resetData = function() {\n    self.results = [];\n    self.error = false;\n  }\n\n\tself.on('mount', () => {\n      console.log('typicode-users mount')\n      riot.control.on(riot.EVT.typicodeUserStore.out.typicodeUsersChanged,self.onTypicodeUsersChanged);\n      riot.control.trigger(riot.EVT.typicodeUserStore.in.typicodeUsersFetch);\n    });\n    self.on('unmount', () => {\n      console.log('typicode-users unmount')\n      riot.control.off(riot.EVT.typicodeUserStore.out.typicodeUsersChanged,self.onTypicodeUsersChanged);\n    });\n\tself.onTypicodeUsersChanged = (result) =>{\n       console.log(riot.EVT.typicodeUserStore.out.typicodeUsersChanged);\n       self.results = result;\n       console.log(self.results);\n       self.update();\n    }\n  self.route = (evt) => {\n\t\triot.control.trigger('riot-route-dispatch',\n\t\t'my-component-page/typicode-user-detail?id='+evt.item.id);\n\t  };\n});\n\n    \n  \n\n\n// WEBPACK FOOTER //\n// app/pages/my-component-page.tag","\n    var riot = require('riot')\n    riot.tag2('mpc-typicode-user-detail', '<div if=\"{result != null}\" class=\"panel panel-default\"> <div class=\"panel-heading\"> <h3 class=\"panel-title\">{result.name}</h3> </div> <div class=\"panel-body\"> <form class=\"form-horizontal\"> <fieldset> <legend>User Details</legend> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Name</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.name}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Email</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.email}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Phone</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.phone}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">User Name</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.username}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Web Site</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.website}</p> </div> </div> </fieldset> </form> <form class=\"form-horizontal\"> <fieldset> <legend>Address</legend> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Suite</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.address.suite}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Street</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.address.street}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">City</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.address.city}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Zip Code</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.address.zipcode}</p> </div> </div> </fieldset> </form> <form class=\"form-horizontal\"> <fieldset> <legend>Company</legend> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Name</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.company.name}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Catch Phrase</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.company.catchPhrase}</p> </div> </div> <div class=\"form-group\"> <label class=\"col-sm-2 control-label\">Business Statement</label> <div class=\"col-sm-10\"> <p class=\"form-control-static\">{result.company.bs}</p> </div> </div> </fieldset> </form> </div> </div>', '', '', function(opts) {\n    var self = this;\n\n    self.result = null;\n    self.onUserChanged = (user) => {\n        self.result = user;\n        console.log(self.result);\n        self.update();\n    }\n\n    self.on('mount', function() {\n        var q = riot.route.query();\n        console.log('on mount: typicode-user-detail',q);\n        riot.control.on(riot.EVT.typicodeUserStore.out.typicodeUserChanged, self.onUserChanged);\n\n        riot.control.trigger(riot.EVT.typicodeUserStore.in.typicodeUserFetch, { id: q.id });\n    });\n\n    self.on('unmount', function() {\n        console.log('on unmount:');\n        riot.control.off(riot.EVT.typicodeUserStore.out.typicodeUserChanged, self.onUserChanged);\n    });\n\n});\n    \n  \n\n\n// WEBPACK FOOTER //\n// app/pages/typicode-user-detail.tag","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/css/index.css\n// module id = 6\n// module chunks = 0","import\t\t\t\t\t\t\t\t\t\t'riot';\r\nimport './css/index.css';\r\nimport TypicodeUserStore \t\t\tfrom \t'./stores/typicode-user-store.js';\r\nimport RouteContributionStore \t\tfrom \t'./stores/route-contribution-store.js';\r\nimport \t\t\t\t\t\t\t\t\t\t'./pages/my-component-page.tag';\r\nimport \t\t\t\t\t\t\t\t\t\t'./pages/typicode-user-detail.tag';\r\nimport \t\t\t\t\t\t\t\t\t\t'./pages/home.tag';\r\n\r\nvar registerRecord = {\r\n  name: 'typicode-component',\r\n  stores: [\r\n\t\t{store: new TypicodeUserStore()},\r\n\t\t{store: new RouteContributionStore()}\r\n  ],\r\n  postLoadEvents: [\r\n\t\t{event: 'typicode-init', data: {}}\r\n  ],\r\n  preUnloadEvents: [\r\n\t\t{event: 'typicode-uninit', data: {}}\r\n  ]\r\n};\r\n\r\nriot.control.trigger('plugin-registration', registerRecord);\r\nriot.control.trigger('component-load-complete', registerRecord.name);\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// app/index.js"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;;;AChEA;;;;;;;;;;;;;;;ACAA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;AAlDA;;;;;;;;;;;;;;;ACCA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AAFA;AARA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAzGA;;;;;;;;;ACFA;AACA;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;ACzBA;;;;;;;;;ACAA;AACA;AAAA;AACA;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;AACA;AACA;AACA;AAIA;AAGA;AATA;AACA;AAaA;AACA;;;A","sourceRoot":""}